= Коллекционный контрол

Элемент разметки `_Коллекционный контрол_` предназначен для выбора одного или нескольких значений из одного или нескольких справочников.

.Записи справочника сотрудников
image::select-performer.png[Записи справочника сотрудников]

В зависимости от настроек могут быть ограничены возможности выбора определённых типов записей, а также области выбора (см. подробнее xref:layouts:ctrl/directories/directoryItemsCollection.adoc[]).

Также может быть разрешён выбор только одной или нескольких записей. Или режим, при котором определённое значение будет по умолчанию выбрано.

== Структура записей справочников

Нажмите кнопку image:buttons/book.png[Книга] или выберите элемент разметки и нажмите клавишу kbd:[&#92;], чтобы открыть окно выбора элементов.

.Окно поиска и выбора значения элементов
image::collection-select.png[Окно выбора значения элементов]

.Окно поиска и выбора элементов содержит:
. Текстовое поле для ввода искомого текста.
. Сворачиваемый блок типа элементов. В заголовке блока отображается название справочника, название секции и текущее количество найденных элементов.
. Таблица найденных элементов. Если в настройках ЭУ не заданы дополнительные поля для типа элементов, таблица будет содержать единственный столбец с названием элемента (параметр "xref:layouts:ctrl/directories/directoryItemsCollection.adoc#disp-field[Отображаемое поле]").
+
Если в настройках ЭУ задано свойство _Дополнительные поля_, таблица будет содержать столбец с названием элемента (параметр "xref:layouts:ctrl/directories/directoryItemsCollection.adoc#disp-field[Отображаемое поле]"), а также столбцы для всех полей, указанных в параметре "xref:layouts:ctrl/directories/directoryItemsCollection.adoc#add-fields[Дополнительные поля]]"+
Если в таблице какого-либо типа элементов отображается выбранный элемент, он будет выделен жирным шрифтом.
+
. Кнопка добавления сотрудника контрагента. Доступна если настроено Редактирование справочника и задано свойство "xref:layouts:ctrl/directories/directoryItemsCollection.adoc#node[Узел]".
. Список выбранных значений с возможностью удаления элементов. Если установлен флаг в настройке "xref:layouts:ctrl/directories/directoryItemsCollection.adoc#add-fields[Дополнительные поля]", отмеченные дополнительные поля будут выведены в скобках.
. Кнопки *Закрыть* и *Выбрать*. Кнопка *Закрыть* закрывает окно без изменения значения ЭУ, аналогичное действие поведение будет при закрытии формы кнопкой `Х` в заголовке, либо при клике по странице вне формы. Кнопка *Выбрать* закрывает окно, значение ЭУ будет установлено как список выбранных в форме элементов.

После выбора значения и нажатия кнопки *Выбрать* выбранное значение записывается в поле _Выбрано_, из которого можно также удалить выбранное значение справочника.

Окно разделено на блоки, каждый из которых представляет отдельный справочник. Блоки справочников представлены таблицами или списками, где значения отображаются в отдельных строках.

Чтобы перейти к дочерним элементам, нажмите кнопку image:buttons/arrow-blue-forward.png[Стрелка вправо]. Чтобы выйти из содержимого, используйте ссылки в пути к текущему открытому элементу справочника.

Для перемещения между элементами справочников можно использовать клавиши клавиатуры: kbd:[&#8593;], kbd:[&#8595;], kbd:[&#8594;] (для перехода к содержимому выделенного элемента), kbd:[&#8592;] (для выхода из содержимого).

Поиск по справочникам осуществляется из строки поиска. Поиск выполняется по всему справочнику или по элементу, заданному xref:layouts:ctrl/directories/directoryItemsCollection.adoc[в свойствах ЭУ].

.Поиск в коллекционном контроле
image::search-saff-directory.png[Поиск в коллекционном контроле]

== Выбрать запись из справочника

Чтобы выбрать запись, нажмите на неё или выберите с помощью клавиатуры и нажмите клавишу kbd:[&#9141;].

.Справочник сотрудников с выбранной записью
image::staff-selected.png[Справочник сотрудников с выбранной записью]

В режиме множественного выбора элемент будет добавлен в список выбранных элементов в строке _Выбрано:_. Все выбранные записи выделяются жирным шрифтом.

Чтобы снять выбор с элемента в режиме множественного выбора, нажмите кнопку image:buttons/x-red-circle.png[Крестик в круге] справа от названия элемента в строке _Выбрано:_.

== Добавить запись справочника

Нажмите кнопку *Выбрать* или *OK* (если разрешается выбирать несколько записей), чтобы добавить запись.

.Запись будет добавлена:
* В значение элемента разметки (в режиме выбора одной записи).
+
.Элемент разметки в режиме выбора одной записи
image::one-performer.png[Элемент разметки в режиме выбора одной записи]
+
* В список значений элемента разметки (в режиме выбора нескольких записей).
+
.Элемент разметки в режиме множественного выбора
image::multi-item.png[Элемент разметки в режиме множественного выбора]

== Быстрый поиск по справочнику

Чтобы воспользоваться быстрым поиском по справочнику, введите искомое значение в поле элемента управления. Записи, соответствующие условиям запроса, будут показаны в списке. Записи, которые были выбраны, в результатах поиска не отображаются.

NOTE: Обратите внимание, поиск активируется при вводе определённого количества символов, см. подробнее описание свойства "xref:layouts:ctrl/directories/directoryItemsCollection.adoc#search-index[Поисковой индекс]"

.Быстрый поиск по справочнику
image::staff-quick-search.png[Быстрый поиск по справочнику]

При поиске действуют общие ограничения по типам элементов и области выбора.

[#last]
== Последние выбранные значения

В списке последних выбранных значений отображаются записи из всех справочников, которые были выбраны ранее.

.Последние выбранные записи
image::last-used-staff.png[Последние выбранные записи]

Чтобы открыть список последних, выберите элемент разметки и нажмите клавишу kbd:[&#8595;] или kbd:[⎵]. Поле для ввода текста должно быть пустым, иначе будет вызван быстрый поиск.

include::partial$excerpts.adoc[tags=clear-last]

== Удалить значение из списка в режиме множественного выбора

Нажмите кнопку image:buttons/x-red-itallic.png[Крестик] в строке значения, чтобы удалить его из списка.
