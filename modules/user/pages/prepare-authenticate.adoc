= Аутентификация в {wc}е

{wc} {dv} поддерживает несколько способов аутентификации. В зависимости от предпочитаемого способа аутентификации, в {wc}е можно авторизоваться:

* С помощью учётной записи Windows.
* С помощью OpenID:
+
При использовании авторизации через OpenID потребуется дополнительная опция лицензии.
+
** С помощью учётной записи Azure.
+
Опция лицензии _{dv} Коннектор к AzureAD_.
+
** С использованием учётной записи ЕСИА -- госуслуги.
+
Опция лицензии _{dv} Коннектор к ЕСИА_.
+
** С помощью учётной записи ADFS.
+
Опция лицензии _{dv} Коннектор к ADFS_.

.Страница аутентификации
image::authentication.png[Страница аутентификации]

.Если вы хотите использовать УЗ коннектора вместо УЗ Windows:
. Сообщите администратору, какую учётную запись (УЗ) вы желаете использовать для работы с {wc}ом.
. Передайте администратору логин из внешней системы. Подробнее о поддерживаемых коннекторах и их настройке см. "xref:engineer:ROOT:authorization-extensions.adoc[]".
. Администратор в Справочнике Сотрудников {wc}а xref:admin:user-management.adoc#configure[отметит] УЗ, которую сотрудник может использовать для входа.
. Авторизуйтесь в {wc}е желаемым способом.

[#windows]
== Вход с помощью учётной записи

Вход с помощью учётной записи считается основным способом аутентификации.

include::6.1@platform:ROOT:partial$excerpts.adoc[tags=system-accounts]

.Чтобы войти в {wc} с помощью учётной записи:
include::partial$excerpts.adoc[tags=auth-start]
имя учётной записи.
. Введите _Пароль_ учётной записи.
. Нажмите кнопку *Войти*.
+
include::partial$excerpts.adoc[tags=auth-success]
+
.Ошибка аутентификации
image::authentication-fail.png[Ошибка аутентификации]

[#extensions]
== Вход с помощью сторонних расширений

****
Данный раздел документации описывает вход в систему с помощью сторонних сервисов.

* Инструкцию по настройке страницы входа (добавлению формы входа) см. в разделе "xref:programmer:client/authorization.adoc[]".
* Инструкцию по регистрации расширений авторизации см. в xref:admin:authorization-extensions.adoc[документации модуля {pl}].
* Как предоставить пользователю возможность входить с использованием сторонних расширений, см. в разделе "xref:admin:user-management.adoc#configure[Настройка способов входа]".
****

Если в системе отсутствует требуемая xref:ROOT:requirements-license.adoc[опция лицензии] для использования выбранного сервиса аутентификации, на странице входа отображается соответствующее сообщение:

.Для способа аутентификации требуется лицензия
image::authentication-license.png[Для способа аутентификации требуется лицензия]

.Чтобы войти в {wc} с помощью стороннего расширения:
include::partial$excerpts.adoc[tags=auth-start]
логин и пароль для входа в аккаунт стороннего сервиса.
. Нажмите кнопку *Войти*.
+
include::partial$excerpts.adoc[tags=auth-success]
+
include::partial$excerpts.adoc[tags=auth-end]
+
. При установке некорректного корневого сертификата сайта возможно появление ошибки `SSL-соединение не может быть установлено, см. внутренне исключение` в журнале {wc}а. В случае возникновения ошибки обратитесь к xref:engineer::authorization-extensions.adoc#error[администратору].

Для входа в {wc} важно соответствие указанного адреса электронной почты, телефона или СНИЛС указанным в учётной записи Госуслуг. Если соответствие не установлено, вход не будет осуществлён.
Для аутентификации на портале Госуслуг можно использовать любой из доступных логинов: email, телефон, СНИЛС. При первом входе с учетной записью ЕСИА потребуется предоставить права доступа.

.Предоставление прав доступа
image::esia-message.png[Предоставление прав доступа]

Когда права доступа предоставлены, сотрудник может использовать учётную запись Госуслуг для входа в {wc}.

[#log-out]
== Возврат к аутентификации

Для возврата к странице аутентификации перейдите по адресу `\http://Сервер-{wc}а/Account/Login` или воспользуйтесь функцией *Выход* в xref:interface-user-menu.adoc[меню пользователя].

Если открыть страницу аутентификации с дополнительными параметрами `\http://%WebClientServer%/Account/Login?userName=userDomain\userAccount`, значение поле "Логин" будет вставлено из адресной строки.

Если пользователь ранее входил с использованием одного из способов, эта информация хранится в браузере и ему будет показана страница приветствия с вводом пароля:

.Возврат к аутентификации
image::authentication-return.png[Возврат к аутентификации]
